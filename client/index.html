<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <meta name="theme-color" content="#f97316" />
    <meta name="description" content="SmartChef AI - AI-Powered Smart Recipe Generator & Meal Planner. Personalized cooking recommendations based on your ingredients, dietary restrictions, and skill level." />
    <meta name="keywords" content="recipe generator, meal planner, AI cooking, smart recipes, dietary restrictions, ingredient-based recipes, cooking assistant" />
    <meta name="author" content="SmartChef AI" />
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="SmartChef AI - AI-Powered Recipe Generator & Meal Planner" />
    <meta property="og:description" content="Get personalized recipe recommendations and meal plans powered by AI. Transform your available ingredients into delicious meals." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://smartchef-ai.com" />
    <meta property="og:image" content="/og-image.jpg" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="SmartChef AI - AI-Powered Recipe Generator & Meal Planner" />
    <meta name="twitter:description" content="Get personalized recipe recommendations and meal plans powered by AI" />
    <meta name="twitter:image" content="/twitter-image.jpg" />
    
    <!-- PWA Meta Tags -->
    <link rel="apple-touch-icon" href="/logo192.png" />
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Preconnect to improve performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <title>SmartChef AI - AI-Powered Recipe Generator & Meal Planner</title>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "SmartChef AI",
        "description": "AI-Powered Smart Recipe Generator & Meal Planner",
        "url": "https://smartchef-ai.com",
        "applicationCategory": "LifestyleApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Organization",
            "name": "SmartChef AI"
        },
        "features": [
            "AI-powered recipe generation",
            "Personalized meal planning",
            "Interactive cooking mode",
            "Smart pantry management",
            "Nutrition tracking",
            "Shopping list generation"
        ]
    }
    </script>
    
    <!-- Performance and Loading Optimizations -->
    <style>
        /* Critical CSS for loading screen */
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f9fafb;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Loading screen styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #f97316 0%, #ef4444 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        
        .chef-icon {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            animation: bounce 2s infinite;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .loading-text {
            color: white;
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 12px;
            text-align: center;
            letter-spacing: -0.5px;
        }
        
        .loading-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 16px;
            text-align: center;
            max-width: 320px;
            line-height: 1.5;
            margin-bottom: 32px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        .loading-features {
            margin-top: 32px;
            text-align: center;
        }
        
        .loading-features p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
            margin: 8px 0;
            animation: fadeInUp 0.6s ease-out forwards;
            opacity: 0;
        }
        
        .loading-features p:nth-child(1) { animation-delay: 0.2s; }
        .loading-features p:nth-child(2) { animation-delay: 0.4s; }
        .loading-features p:nth-child(3) { animation-delay: 0.6s; }
        .loading-features p:nth-child(4) { animation-delay: 0.8s; }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Hide scrollbar during loading */
        body.loading {
            overflow: hidden;
        }
        
        /* Prevent flash of unstyled content */
        #root {
            opacity: 0;
            transition: opacity 0.3s ease-in;
        }
        
        #root.loaded {
            opacity: 1;
        }
        
        /* Critical layout styles */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        /* Ensure proper scaling on mobile */
        @media (max-width: 768px) {
            .loading-text {
                font-size: 24px;
            }
            
            .loading-subtitle {
                font-size: 14px;
                max-width: 280px;
            }
            
            .chef-icon {
                width: 70px;
                height: 70px;
            }
        }
        
        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .loading-screen {
                background: #000;
                color: #fff;
            }
            
            .chef-icon {
                border: 2px solid #fff;
            }
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .chef-icon {
                animation: none;
            }
            
            .spinner {
                animation: none;
                border-top-color: transparent;
            }
            
            .loading-features p {
                animation: none;
                opacity: 1;
            }
        }
    </style>
  </head>
  <body class="loading">
    <noscript>
      <div style="padding: 2rem; text-align: center; font-family: Inter, sans-serif;">
        <h1>JavaScript Required</h1>
        <p>SmartChef AI requires JavaScript to function properly. Please enable JavaScript in your browser settings and reload the page.</p>
        <p>For the best cooking experience with AI-powered recipe generation and meal planning, JavaScript is essential.</p>
      </div>
    </noscript>
    
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen" role="status" aria-label="Loading SmartChef AI application">
        <div class="chef-icon" aria-hidden="true">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#f97316" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"/>
                <line x1="6" y1="17" x2="18" y2="17"/>
                <line x1="6" y1="13" x2="18" y2="13"/>
            </svg>
        </div>
        <h1 class="loading-text">SmartChef AI</h1>
        <p class="loading-subtitle">Preparing your personalized cooking experience with AI-powered recipes and meal planning...</p>
        <div class="spinner" aria-hidden="true"></div>
        
        <div class="loading-features" aria-hidden="true">
            <p>ðŸ¤– Analyzing your preferences</p>
            <p>ðŸ¥˜ Generating personalized recipes</p>
            <p>ðŸ“… Preparing meal plans</p>
            <p>ðŸ›’ Creating smart shopping lists</p>
        </div>
    </div>
    
    <!-- React App Root -->
    <div id="root" aria-label="SmartChef AI Application"></div>
    
    <!-- Application Scripts -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Loading and Performance Scripts -->
    <script>
        // Performance monitoring
        const startTime = performance.now();
        
        // Hide loading screen after app loads
        window.addEventListener('load', function() {
            const loadTime = performance.now() - startTime;
            console.log(`SmartChef AI loaded in ${Math.round(loadTime)}ms`);
            
            // Minimum loading time for branding (but not too long for UX)
            const minLoadTime = 1500;
            const remainingTime = Math.max(0, minLoadTime - loadTime);
            
            setTimeout(function() {
                const loadingScreen = document.getElementById('loading-screen');
                const root = document.getElementById('root');
                const body = document.body;
                
                if (loadingScreen && root && body) {
                    // Fade out loading screen
                    loadingScreen.classList.add('hidden');
                    
                    // Show app content
                    root.classList.add('loaded');
                    body.classList.remove('loading');
                    
                    // Remove loading screen from DOM after animation
                    setTimeout(function() {
                        if (loadingScreen.parentNode) {
                            loadingScreen.parentNode.removeChild(loadingScreen);
                        }
                    }, 500);
                }
            }, remainingTime);
        });
        
        // Service Worker Registration for PWA functionality
        if ('serviceWorker' in navigator && window.location.protocol === 'https:') {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('SmartChef AI SW registered: ', registration);
                        
                        // Check for updates
                        registration.addEventListener('updatefound', function() {
                            const newWorker = registration.installing;
                            if (newWorker) {
                                newWorker.addEventListener('statechange', function() {
                                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                        // New content available, notify user
                                        console.log('New content available for SmartChef AI');
                                    }
                                });
                            }
                        });
                    })
                    .catch(function(registrationError) {
                        console.log('SmartChef AI SW registration failed: ', registrationError);
                    });
            });
        }
        
        // Error handling for critical resources
        window.addEventListener('error', function(e) {
            console.error('SmartChef AI Resource Error:', e.filename, e.lineno, e.message);
        });
        
        // Unhandled promise rejection handling
        window.addEventListener('unhandledrejection', function(e) {
            console.error('SmartChef AI Promise Error:', e.reason);
        });
        
        // Network connectivity detection
        function updateOnlineStatus() {
            const body = document.body;
            if (navigator.onLine) {
                body.classList.remove('offline');
                console.log('SmartChef AI: Online');
            } else {
                body.classList.add('offline');
                console.log('SmartChef AI: Offline');
            }
        }
        
        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);
        updateOnlineStatus(); // Initial check
        
        // Accessibility: Skip to content link
        document.addEventListener('DOMContentLoaded', function() {
            const skipLink = document.createElement('a');
            skipLink.href = '#main-content';
            skipLink.textContent = 'Skip to main content';
            skipLink.className = 'sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:bg-white focus:text-black focus:p-2 focus:rounded';
            skipLink.addEventListener('focus', function() {
                this.classList.remove('sr-only');
            });
            skipLink.addEventListener('blur', function() {
                this.classList.add('sr-only');
            });
            document.body.insertBefore(skipLink, document.body.firstChild);
        });
        
        // Theme detection and application
        function applyTheme() {
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const storedTheme = localStorage.getItem('smartchef-theme');
            const theme = storedTheme || (prefersDark ? 'dark' : 'light');
            
            document.documentElement.classList.toggle('dark', theme === 'dark');
            localStorage.setItem('smartchef-theme', theme);
        }
        
        // Apply theme immediately to prevent flash
        applyTheme();
        
        // Listen for theme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', applyTheme);
        
        // Viewport height fix for mobile browsers
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        setViewportHeight();
        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', setViewportHeight);
        
        // Performance observer for monitoring
        if ('PerformanceObserver' in window) {
            try {
                const observer = new PerformanceObserver((list) => {
                    for (const entry of list.getEntries()) {
                        if (entry.entryType === 'navigation') {
                            console.log(`SmartChef AI Navigation: ${entry.type} in ${Math.round(entry.duration)}ms`);
                        }
                    }
                });
                observer.observe({ entryTypes: ['navigation'] });
            } catch (e) {
                // PerformanceObserver not supported or failed
                console.log('Performance monitoring unavailable');
            }
        }
        
        // Analytics placeholder (replace with actual analytics)
        window.smartchefAnalytics = {
            track: function(event, properties) {
                console.log('Analytics:', event, properties);
                // Implement actual analytics tracking here
            },
            page: function(name) {
                console.log('Page view:', name);
                // Implement page tracking here
            }
        };
        
        // Track initial page load
        window.addEventListener('load', function() {
            if (window.smartchefAnalytics) {
                window.smartchefAnalytics.page('App Load');
            }
        });
    </script>
    
    <!-- Offline support notification -->
    <div id="offline-notification" class="sr-only fixed top-4 left-4 right-4 bg-yellow-100 border border-yellow-400 text-yellow-800 px-4 py-3 rounded z-50" role="alert">
        <strong>Offline Mode:</strong> Some features may be limited while you're offline.
    </div>
    
    <!-- Browser compatibility check -->
    <script>
        // Check for modern browser features
        const requiredFeatures = [
            'fetch',
            'Promise',
            'Map',
            'Set',
            'localStorage'
        ];
        
        const missingFeatures = requiredFeatures.filter(feature => !(feature in window));
        
        if (missingFeatures.length > 0) {
            document.body.innerHTML = `
                <div style="padding: 2rem; text-align: center; font-family: Inter, sans-serif; max-width: 600px; margin: 0 auto;">
                    <h1 style="color: #f97316; margin-bottom: 1rem;">Browser Update Required</h1>
                    <p style="margin-bottom: 1rem;">SmartChef AI requires a modern browser to provide the best cooking experience with AI-powered features.</p>
                    <p style="margin-bottom: 1rem;">Please update your browser to the latest version or use a modern browser like:</p>
                    <ul style="text-align: left; margin-bottom: 1rem;">
                        <li>Google Chrome (version 70+)</li>
                        <li>Mozilla Firefox (version 60+)</li>
                        <li>Safari (version 12+)</li>
                        <li>Microsoft Edge (version 79+)</li>
                    </ul>
                    <p>Missing features: ${missingFeatures.join(', ')}</p>
                </div>
            `;
        }
    </script>
    
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>
